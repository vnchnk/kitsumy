# Kitsumy ‚Äî –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

## üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### 1. –ë–µ–∑–ø–µ–∫–∞ API –∫–ª—é—á—ñ–≤
–§–∞–π–ª `.env` –∑ —Ä–µ–∞–ª—å–Ω–∏–º API –∫–ª—é—á–µ–º –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó. –î–æ–¥–∞–π –π–æ–≥–æ –¥–æ `.gitignore`:
```
.env
.env.local
```

### 2. –í—ñ–¥—Å—É—Ç–Ω—è –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
–í `apps/api/src/services/orchestrator.ts` –Ω–µ–º–∞—î try-catch –¥–ª—è AI –≤–∏–∫–ª–∏–∫—ñ–≤ ‚Äî —è–∫—â–æ OpenAI/Replicate –≤–ø–∞–¥–µ, —Å–µ—Ä–≤–µ—Ä –∫—Ä–∞—à–Ω–µ—Ç—å—Å—è.

### 3. –ù–µ–º–∞—î –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
–í `apps/api/src/index.ts` –∑–∞–ø–∏—Ç–∏ –¥–æ `/generate` –Ω–µ –≤–∞–ª—ñ–¥—É—é—Ç—å—Å—è ‚Äî –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∞ –≤—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å.

---

## üü° –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### 4. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
–ó–∞—Ä–∞–∑ –≤—Å–µ –≤ –ø–∞–º'—è—Ç—ñ. –î–æ–¥–∞–π:
- **SQLite** (–ø—Ä–æ—Å—Ç—ñ—à–µ) –∞–±–æ **PostgreSQL** –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –∫–æ–º—ñ–∫—Å—ñ–≤
- –ö–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ AI (—Ç–æ–π —Å–∞–º–∏–π prompt = —Ç–æ–π —Å–∞–º–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)

### 5. –ß–µ—Ä–≥–∞ –∑–∞–≤–¥–∞–Ω—å
BullMQ –≤–∂–µ —î –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è—Ö, –∞–ª–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–º—ñ–∫—Å—É –∑–∞–π–º–∞—î —á–∞—Å ‚Äî –∫—Ä–∞—â–µ:
```
POST /generate ‚Üí –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ job_id
GET /status/:job_id ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
```

### 6. Rate limiting
–î–æ–¥–∞–π rate limiter –¥–ª—è API —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∑–ª–æ–≤–∂–∏–≤–∞–Ω—å:
```bash
npm install @fastify/rate-limit
```

---

## üü¢ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –ø–æ—Ä–∞–¥–∏

### 7. Streaming –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —á–µ–∫–∞—î –¥–æ–≤–≥–æ –ø–æ–∫–∏ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –∫–æ–º—ñ–∫—Å. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π SSE (Server-Sent Events) –¥–ª—è –ø–æ–∫–∞–∑—É –ø—Ä–æ–≥—Ä–µ—Å—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ:
- "–°—Ç–≤–æ—Ä—é—é —Å—é–∂–µ—Ç..."
- "–ü–∏—à—É –¥—ñ–∞–ª–æ–≥–∏..."
- "–ì–µ–Ω–µ—Ä—É—é –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è 1/5..."

### 8. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂—ñ–≤
–ó–∞—Ä–∞–∑ –∫–æ–∂–Ω–∞ –ø–∞–Ω–µ–ª—å –≥–µ–Ω–µ—Ä—É—î –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞. –†–æ–∑–≥–ª—è–Ω—å:
- **Seed-based generation** —É Flux
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è character descriptions –º—ñ–∂ –ø–∞–Ω–µ–ª—è–º–∏

### 9. –¢–µ—Å—Ç–∏
–ù–µ–º–∞—î –∂–æ–¥–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤. –î–æ–¥–∞–π —Ö–æ—á–∞ –±:
- Unit —Ç–µ—Å—Ç–∏ –¥–ª—è orchestrator (mock AI responses)
- E2E —Ç–µ—Å—Ç–∏ –¥–ª—è API endpoints

---

## üé® –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ –∑–æ–±—Ä–∞–∂–µ–Ω—å

### 10. –°–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ comic-style –º–æ–¥–µ–ª—ñ
–î–æ—Å–ª—ñ–¥–∏—Ç–∏ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ fine-tuned –º–æ–¥–µ–ª—ñ –¥–ª—è –∫–æ–º—ñ–∫—Å—ñ–≤:
- SDXL –∑ LoRA –¥–ª—è comic book style
- Manga/anime style –º–æ–¥–µ–ª—ñ
- Graphic novel style –º–æ–¥–µ–ª—ñ

### 11. –ú—É–ª—å—Ç–∏-–º–æ–¥–µ–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
–î–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –≤–∏–±—ñ—Ä —Å—Ç–∏–ª—é:
- **Realistic** ‚Äî Flux 2.0 Pro
- **Comic Book** ‚Äî —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –º–æ–¥–µ–ª—å
- **Manga** ‚Äî anime-style –º–æ–¥–µ–ª—å
- **Graphic Novel** ‚Äî noir/gritty style

### 12. Serverless GPU –¥–ª—è batch –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
–î–ª—è –º–∞—Å–æ–≤–æ—ó –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ç–∏—Å—è—á –∫–æ–º—ñ–∫—Å—ñ–≤:
- **RunPod Serverless** –∞–±–æ **Modal** –¥–ª—è auto-scaling
- Batch job —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤
- –ó–Ω–∞—á–Ω–∞ –µ–∫–æ–Ω–æ–º—ñ—è –ø—Ä–∏ > 500 –∫–æ–º—ñ–∫—Å—ñ–≤/–¥–µ–Ω—å (~$0.001-0.002 –∑–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è vs $0.04 –Ω–∞ Replicate)

---

## üìã –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω–∏–π –ø–ª–∞–Ω –¥—ñ–π

| –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç | –ó–∞–≤–¥–∞–Ω–Ω—è | –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å |
|-----------|----------|------------|
| 1 | –í–∏–¥–∞–ª–∏—Ç–∏ `.env` –∑ git history | –õ–µ–≥–∫–æ |
| 2 | –î–æ–¥–∞—Ç–∏ error handling –≤ orchestrator | –õ–µ–≥–∫–æ |
| 3 | –î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –∑–∞–ø–∏—Ç—ñ–≤ (Zod) | –õ–µ–≥–∫–æ |
| 4 | –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ streaming –ø—Ä–æ–≥—Ä–µ—Å—É | –°–µ—Ä–µ–¥–Ω—å–æ |
| 5 | –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –ë–î –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è | –°–µ—Ä–µ–¥–Ω—å–æ |
| 6 | –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ BullMQ –¥–ª—è —á–µ—Ä–≥–∏ | –°–µ—Ä–µ–¥–Ω—å–æ |
| 7 | –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ Flux 2.0 Pro | –õ–µ–≥–∫–æ |
| 8 | –ü–æ–∫—Ä–∞—â–∏—Ç–∏ –ø—Ä–æ–º–ø—Ç–∏ –¥–ª—è comic-style | –õ–µ–≥–∫–æ |
| 9 | –î–æ—Å–ª—ñ–¥–∏—Ç–∏ comic-style –º–æ–¥–µ–ª—ñ | –°–µ—Ä–µ–¥–Ω—å–æ |
| 10 | –ú—É–ª—å—Ç–∏-–º–æ–¥–µ–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä —Å—Ç–∏–ª—é | –°–µ—Ä–µ–¥–Ω—å–æ |
| 11 | Serverless GPU –¥–ª—è batch –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó | –°–∫–ª–∞–¥–Ω–æ |
